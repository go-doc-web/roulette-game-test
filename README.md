Документація проєкту "Рулетка"

---

## 1. Огляд проєкту

Цей проєкт є простою веб-симуляцією рулетки, що включає анімоване обертання, визначення переможця та візуальний індикатор часу до наступного раунду. Він імітує динамічний ігровий процес, надаючи користувачеві наочне уявлення про хід гри.

---

## 2. Технології та підходи

Проєкт побудований на сучасному стеку веб-технологій, орієнтованому на продуктивність та зручність розробки.

- **Next.js (v15.3.3)**
  - **Підхід:** Фреймворк React для побудови користувацьких інтерфейсів. Використання Next.js дозволяє створювати серверні або статичні React-застосунки, забезпечуючи гарну продуктивність та SEO.
  - **Застосування:** Основний фреймворк для структури проєкту та рендерингу компонентів.
- **React (v19.0.0) та React DOM (v19.0.0)**
  - **Підхід:** Бібліотека для створення інтерактивних користувацьких інтерфейсів на основі компонентів.
  - **Застосування:** Побудова UI-компонентів рулетки, керування станом (стейтом) та життєвим циклом компонентів.
- **Tailwind CSS (v4.1.8) з PostCSS та Autoprefixer**
  - **Підхід:** Утилітарний CSS-фреймворк. Дозволяє швидко стилізувати елементи, використовуючи попередньо визначені класи, що прискорює розробку та робить стилі послідовними.
  - **Застосування:** Основний інструмент для стилізації компонентів рулетки, позиціонування елементів, керування відступами та розмірами.
- **Framer Motion (v12.16.0)**
  - **Підхід:** Потужна бібліотека для декларативних анімацій у React. Дозволяє легко створювати складні анімації без необхідності вручну керувати CSS-transition або `requestAnimationFrame`.
  - **Застосування:** Анімація руху рулетки (`motion.ul`), анімація масштабування виграшної фішки (`motion.li`), а також загальний контроль анімацій.
- **TypeScript (v5)**
  - **Підхід:** Розширення JavaScript, що додає статичну типізацію. Допомагає виявляти помилки на етапі розробки, покращує читабельність коду та спрощує його підтримку.
  - **Застосування:** Весь код проєкту написаний на TypeScript, що забезпечує строгу типізацію даних (наприклад, `Cell`, `WinnerIndex`), пропсів компонентів та станів.
- **clsx (v2.1.1)**
  - **Підхід:** Невелика утиліта для умовного об'єднання CSS-класів.
  - **Застосування:** Зручне формування рядка класів для компонентів (`clsx`) залежно від їхнього стану (наприклад, виділення виграшної фішки).
- **uuid (v11.1.0)**
  - **Підхід:** Бібліотека для генерації унікальних ідентифікаторів.
  - **Застосування:** Використовується для створення унікальних `id` для комірок рулетки, що важливо для коректної роботи React-списків (властивість `key`).

---

## 3. Основна логіка та функції

Проєкт складається з кількох ключових частин, які взаємодіють між собою:

- **Компонент Home (`app/page.tsx`)**
  - **Роль:** Це основний компонент сторінки, який керує загальним станом гри.
  - **Стан:** Відповідає за завантаження даних рулетки (`cells`, `winnerIndex`), відображення стану завантаження/помилки, а також за прапорці `isRolling` (рулетка обертається) та `showProgress` (показувати індикатор прогресу).
  - **Логіка:**
    - `loadData()`: Асинхронна функція для отримання нових даних рулетки (послідовності комірок та виграшного індексу) через `fetchRouletteData`.
    - `handleSpinFinish()`: Викликається, коли анімація рулетки завершена. Встановлює `isRolling` у `false` та `showProgress` у `true`, а потім запускає таймер (`setTimeout`) для завантаження нових даних рулетки через `ROULETTE_UPDATE_INTERVAL_MS`.
    - `useEffect` хуки: Керують завантаженням даних при першому рендері та переходом станів між обертанням та очікуванням.
- **Компонент RouletteSlider (`components/RouletteSlider.tsx`)**
  - **Роль:** Відповідає за візуальне представлення самої стрічки рулетки та її анімацію.
  - **Пропси:** Приймає `cells` (послідовність фішок), `winnerIndex` (індекс виграшної фішки) та `onFinish` (колбек, що викликається після завершення анімації).
  - **Логіка:**
    - **Дублювання комірок (`formatedCells`):** Створює кілька копій вихідної послідовності комірок, щоб забезпечити плавне нескінченне обертання без "порожніх" місць.
    - **Розрахунок позицій:** Обчислює початкову (`initialX`) та кінцеву (`targetX`) позицію стрічки так, щоб виграшна фішка опинилася по центру екрану. Ці розрахунки враховують ширину контейнера та ширину окремих фішок.
    - **Framer Motion Animation:** Використовує `motion.ul` для анімації горизонтального зсуву стрічки (`x`). Параметри `spring` для `transition` створюють ефект інерції та пружини, характерний для рулетки.
    - **Анімація виграшної фішки:** Після завершення основної анімації рулетки (`onAnimationComplete`), `RouletteSlider` тимчасово виділяє виграшну фішку за допомогою пульсуючої анімації (`scale`).
- **API-сервіс (`lib/api/fetchRouletteData.ts`)**
  - **Роль:** Імітує запит до бекенду для отримання даних рулетки.
  - **Логіка:** Генерує випадкову послідовність фішок (`cells`) та випадковий `winnerIndex`, додаючи затримку (`setTimeout`) для симуляції мережевого запиту.
- **Константи (`constants/index.ts`)**
  - **Роль:** Зберігають глобальні налаштування проєкту, такі як інтервал оновлення рулетки та максимальна ширина контейнера.
